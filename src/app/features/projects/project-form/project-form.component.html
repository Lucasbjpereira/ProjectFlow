<div class="fixed inset-0 bg-black bg-opacity-50 z-40" (click)="close.emit()"></div>
<div class="fixed inset-y-0 right-0 w-full max-w-2xl bg-white z-50 shadow-lg transform transition-transform duration-300 ease-in-out" [class.translate-x-0]="true">
  <div class="flex flex-col h-full">
    <!-- Header -->
    <div class="flex items-center justify-between p-6 border-b">
      <h2 class="text-2xl font-bold text-gray-800">{{ isEditMode ? 'Editar Projeto' : 'Novo Projeto' }}</h2>
      <button (click)="close.emit()" class="p-2 rounded-full hover:bg-gray-100">
        <span class="material-symbols-outlined text-gray-600">close</span>
      </button>
    </div>

    <!-- Form -->
    <form [formGroup]="projectForm" (ngSubmit)="onSubmit()" class="flex-grow p-6 overflow-y-auto">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Project Name -->
        <div class="col-span-2">
          <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Nome do Projeto</label>
          <input id="name" type="text" formControlName="name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500">
        </div>

        <!-- Client -->
        <div *ngIf="!initialClientId">
          <label for="clientId" class="block text-sm font-medium text-gray-700 mb-1">Cliente</label>
          <select id="clientId" formControlName="clientId" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500">
            <option *ngFor="let client of clients$ | async" [value]="client.id">{{ client.name }}</option>
          </select>
        </div>

        <!-- Contract -->
        <div>
          <label for="contractNumber" class="block text-sm font-medium text-gray-700 mb-1">Código do Contrato</label>
          <input id="contractNumber" type="text" formControlName="contractNumber" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500">
        </div>

        <!-- Description -->
        <div class="col-span-2">
          <label for="description" class="block text-sm font-medium text-gray-700 mb-1">Descrição</label>
          <textarea id="description" formControlName="description" rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500"></textarea>
        </div>

        <!-- Budget Hours & Amount -->
        <div>
          <label for="budgetHours" class="block text-sm font-medium text-gray-700 mb-1">Horas Orçadas</label>
          <input id="budgetHours" type="number" formControlName="budgetHours" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500">
        </div>
        <div>
          <label for="budgetAmount" class="block text-sm font-medium text-gray-700 mb-1">Valor Orçado</label>
          <input id="budgetAmount" type="number" formControlName="budgetAmount" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500">
        </div>
        
        <!-- Spent Hours & Revenue -->
        <div>
          <label for="spentHours" class="block text-sm font-medium text-gray-700 mb-1">Horas Gastas</label>
          <input id="spentHours" type="number" formControlName="spentHours" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500">
        </div>
        <div>
          <label for="revenue" class="block text-sm font-medium text-gray-700 mb-1">Faturamento</label>
          <input id="revenue" type="number" formControlName="revenue" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500">
        </div>

        <!-- Status & Priority -->
        <div>
          <label for="status" class="block text-sm font-medium text-gray-700 mb-1">Status</label>
          <select id="status" formControlName="status" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500">
            <option value="planning">Planejamento</option>
            <option value="active">Ativo</option>
            <option value="paused">Pausado</option>
            <option value="completed">Concluído</option>
            <option value="cancelled">Cancelado</option>
          </select>
        </div>
        <div>
          <label for="priority" class="block text-sm font-medium text-gray-700 mb-1">Prioridade</label>
          <select id="priority" formControlName="priority" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500">
            <option value="low">Baixa</option>
            <option value="medium">Média</option>
            <option value="high">Alta</option>
            <option value="urgent">Urgente</option>
          </select>
        </div>

        <!-- Start & End Date -->
        <div>
          <label for="startDate" class="block text-sm font-medium text-gray-700 mb-1">Data de Início</label>
          <input id="startDate" type="date" formControlName="startDate" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500">
        </div>
        <div>
          <label for="endDate" class="block text-sm font-medium text-gray-700 mb-1">Data de Término</label>
          <input id="endDate" type="date" formControlName="endDate" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500">
        </div>

        <!-- Technologies -->
        <div class="col-span-2">
          <label for="technologies" class="block text-sm font-medium text-gray-700 mb-1">Tecnologias (separadas por vírgula)</label>
          <input id="technologies" type="text" formControlName="technologies" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500">
        </div>
      </div>
    </form>

    <!-- Footer -->
    <div class="flex items-center justify-end p-6 border-t">
      <button (click)="close.emit()" type="button" class="px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50">
        Cancelar
      </button>
      <button (click)="onSubmit()" type="submit" [disabled]="projectForm.invalid" class="ml-4 px-6 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-lg shadow-sm hover:bg-purple-700 disabled:bg-gray-400">
        {{ isEditMode ? 'Salvar Alterações' : 'Criar Projeto' }}
      </button>
    </div>
  </div>
</div>
